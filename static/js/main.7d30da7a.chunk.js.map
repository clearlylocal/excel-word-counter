{"version":3,"sources":["components/Footer.tsx","core/wordCount.ts","core/getRows.ts","core/parseExcelFiles.ts","core/writeExcelOutputFile.ts","components/ResultsDisplay.tsx","core/config.ts","pages/Home.tsx","content/instructions.md","utils/fns.ts","utils/dom.ts","utils/utils.ts","utils/formatters.ts","pages/Instructions.tsx","utils/react.ts","utils/snarkdown.ts","Routes.tsx","App.tsx","index.tsx"],"names":["Tooltip","title","children","Footer","htmlProps","className","buildInfo","ts","hash","DEFAULT_PUNCTUATION","EMPTY_RESULT","words","count","detectWords","text","config","trim","punctuationReplacer","punctuationAsBreaker","defaultPunctuations","disableDefaultPunctuation","customizedPunctuations","punctuation","combinedPunctionations","concat","forEach","punctuationReg","RegExp","replace","split","filter","word","common","source","cjk","jp","kr","reg","detectedWords","matched","carry","exec","push","length","countWords","getRows","sheet","headers","rows","eachRow","row","rowNumber","Array","isArray","values","map","x","String","Object","fromEntries","h","i","window","flattenUnzip","files","Promise","all","file","type","JSZip","loadAsync","zip","zobj","dir","async","zblob","zfile","File","name","lastModified","date","getTime","flat","results","countPerUser","rowsCountedPerFile","languages","res","langCode","getLangName","reader","FileReader","onloadend","arrayBuffer","result","ExcelJS","Workbook","xlsx","load","then","workbook","worksheets","userCol","srcCol","every","includes","wordCount","readAsArrayBuffer","resultsToWorkbook","keys","addWorksheet","views","state","xSplit","ySplit","cols","autoFilter","from","column","to","getRow","font","bold","mergeCells","getCell","alignment","horizontal","getColumn","width","entries","user","langData","l","rowsCounted","a","writeBuffer","buf","document","createElement","outFile","Blob","href","URL","createObjectURL","download","Date","toISOString","click","ResultsDisplay","exportToFile","useCallback","writeExcelOutputFile","onClick","align","num","rowSpan","colSpan","j","init","fileNameFormat","raw","JSON","parse","localStorage","getItem","fileName","before","after","beforeIdx","indexOf","beforeEnd","afterIdx","slice","Home","useForm","register","watch","handleSubmit","useMemo","useState","setResults","useEffect","parseExcelFiles","onChange","data","setItem","stringify","multiple","ref","renderAnchors","el","defaultVal","slugs","Proxy","create","get","target","key","querySelectorAll","heading","textContent","slug","toLowerCase","regex","id","Boolean","join","classList","add","scrollHashIntoView","location","setTimeout","matchedEl","fns","reduce","val","fn","pipe","decodeURIComponent","CSS","escape","querySelector","scrollIntoView","Instructions","callback","html","setHtml","history","useHistory","fetch","instructionsMdUrl","cache","content","m","some","ch","startsWith","test","_snarkdown","link","getAttribute","setAttribute","process","prependPublicUrlToRelativeLinks","addEventListener","e","nodeName","preventDefault","origin","open","contains","handleLinks","parentEl","observer","MutationObserver","disconnect","observe","childList","dangerouslySetInnerHTML","__html","Routes","exact","path","App","basename","alt","src","activeClassName","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7d30da7a.chunk.js","sourcesContent":["import { FC, HtmlHTMLAttributes } from 'react'\nimport buildInfo from '../buildInfo.json'\n// import { Tooltip } from './Tooltip'\n\nconst Tooltip: FC<{ title: string }> = ({ title, children }) => {\n\treturn <span title={title}>{children}</span>\n}\n\nexport const Footer: FC<HtmlHTMLAttributes<HTMLElement>> = ({\n\t...htmlProps\n}) => {\n\t// just redirect for now\n\n\treturn (\n\t\t<footer {...htmlProps}>\n\t\t\t<hr />\n\t\t\t<div className='footer-text'>\n\t\t\t\t<small>\n\t\t\t\t\tVersion{' '}\n\t\t\t\t\t<Tooltip title={buildInfo.ts}>\n\t\t\t\t\t\t<code className='build-info'>{buildInfo.hash}</code>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</small>\n\t\t\t</div>\n\t\t</footer>\n\t)\n}\n","// modified from https://github.com/byn9826/words-count/blob/master/src/globalWordsCount.js\n\nconst DEFAULT_PUNCTUATION = [\n\t',',\n\t'，',\n\t'.',\n\t'。',\n\t':',\n\t'：',\n\t';',\n\t'；',\n\t'[',\n\t']',\n\t'【',\n\t']',\n\t'】',\n\t'{',\n\t'｛',\n\t'}',\n\t'｝',\n\t'(',\n\t'（',\n\t')',\n\t'）',\n\t'<',\n\t'《',\n\t'>',\n\t'》',\n\t'$',\n\t'￥',\n\t'!',\n\t'！',\n\t'?',\n\t'？',\n\t'~',\n\t'～',\n\t\"'\",\n\t'’',\n\t'\"',\n\t'“',\n\t'”',\n\t'*',\n\t'/',\n\t'\\\\',\n\t'&',\n\t'%',\n\t'@',\n\t'#',\n\t'^',\n\t'、',\n\t'、',\n\t'、',\n\t'、',\n]\n\nconst EMPTY_RESULT = {\n\twords: [],\n\tcount: 0,\n}\n\ntype Config = {\n\tpunctuationAsBreaker: string\n\tdisableDefaultPunctuation: string[]\n\tpunctuation: string[]\n}\n\nconst detectWords = (text: string, config: Partial<Config> = {}) => {\n\tif (!text || text.trim() === '') return EMPTY_RESULT\n\n\tconst punctuationReplacer = config.punctuationAsBreaker ? ' ' : ''\n\tconst defaultPunctuations = config.disableDefaultPunctuation\n\t\t? []\n\t\t: DEFAULT_PUNCTUATION\n\tconst customizedPunctuations = config.punctuation || []\n\tconst combinedPunctionations = defaultPunctuations.concat(\n\t\tcustomizedPunctuations,\n\t)\n\n\t// Remove punctuations or change to empty space\n\tcombinedPunctionations.forEach(function (punctuation) {\n\t\tconst punctuationReg = new RegExp('\\\\' + punctuation, 'g')\n\t\ttext = text.replace(punctuationReg, punctuationReplacer)\n\t})\n\t// Remove all kind of symbols\n\ttext = text.replace(/[\\uFF00-\\uFFEF\\u2000-\\u206F]/g, '')\n\t// Format white space character\n\ttext = text.replace(/\\s+/, ' ')\n\t// Split words by white space (For European languages)\n\n\tlet words = text.split(' ')\n\twords = words.filter((word) => word.trim())\n\t// Match latin, cyrillic, Malayalam letters and numbers\n\tconst common =\n\t\t/[0-9a-zA-Z\\-\\u00C0-\\u00FF\\u0100-\\u017F\\u0180-\\u024F\\u0250-\\u02AF\\u1E00-\\u1EFF\\u0400-\\u04FF\\u0500-\\u052F\\u0D00-\\u0D7F]+/\n\t\t\t.source\n\t// Match Chinese Hànzì, the Japanese Kanji and the Korean Hanja\n\tconst cjk =\n\t\t'\\u2E80-\\u2EFF\\u2F00-\\u2FDF\\u3000-\\u303F\\u31C0-\\u31EF\\u3200-\\u32FF\\u3300-\\u33FF\\u3400-\\u3FFF\\u4000-\\u4DBF\\u4E00-\\u4FFF\\u5000-\\u5FFF\\u6000-\\u6FFF\\u7000-\\u7FFF\\u8000-\\u8FFF\\u9000-\\u9FFF\\uF900-\\uFAFF'\n\t// Match Japanese Hiragana, Katakana, Rōmaji\n\tconst jp = '\\u3040-\\u309F\\u30A0-\\u30FF\\u31F0-\\u31FF\\u3190-\\u319F'\n\t// Match Korean Hangul\n\tconst kr =\n\t\t'\\u1100-\\u11FF\\u3130-\\u318F\\uA960-\\uA97F\\uAC00-\\uAFFF\\uB000-\\uBFFF\\uC000-\\uCFFF\\uD000-\\uD7AF\\uD7B0-\\uD7FF'\n\n\tconst reg = new RegExp(`${common}|[${cjk}${jp}${kr}]`, 'g')\n\tlet detectedWords = []\n\twords.forEach(function (word) {\n\t\tconst carry = []\n\t\tlet matched: RegExpExecArray\n\t\tdo {\n\t\t\tmatched = reg.exec(word)\n\t\t\tif (matched) carry.push(matched[0])\n\t\t} while (matched)\n\t\tif (carry.length === 0) {\n\t\t\tdetectedWords.push(word)\n\t\t} else {\n\t\t\tdetectedWords = detectedWords.concat(carry)\n\t\t}\n\t})\n\treturn {\n\t\twords: detectedWords,\n\t\tcount: detectedWords.length,\n\t}\n}\n\nconst countWords = (text: string, config: Partial<Config> = {}) => {\n\tconst { count } = detectWords(text, config)\n\treturn count\n}\n\nconst splitWords = (text: string, config: Partial<Config> = {}) => {\n\tconst { words } = detectWords(text, config)\n\treturn words\n}\n\nexport { countWords, splitWords, detectWords }\n","import ExcelJS from 'exceljs'\n\nexport function getRows(sheet: ExcelJS.Worksheet) {\n\tlet headers: string[]\n\n\tconst rows: Record<string, string>[] = []\n\n\tsheet.eachRow((row, rowNumber) => {\n\t\tif (rowNumber === 1) {\n\t\t\t// is header row\n\t\t\tif (Array.isArray(row.values)) {\n\t\t\t\theaders = row.values.map((x) => String(x).trim())\n\t\t\t} else {\n\t\t\t\t// todo - handle if necessary\n\t\t\t\theaders = []\n\t\t\t}\n\t\t} else {\n\t\t\t// is body row\n\t\t\tif (!headers) return\n\n\t\t\trows.push(\n\t\t\t\tObject.fromEntries(\n\t\t\t\t\theaders\n\t\t\t\t\t\t.map((h, i) => [\n\t\t\t\t\t\t\th,\n\t\t\t\t\t\t\trow.values[i] && String(row.values[i]),\n\t\t\t\t\t\t])\n\t\t\t\t\t\t.filter((x) => x && x[1]),\n\t\t\t\t),\n\t\t\t)\n\t\t}\n\t})\n\n\treturn { headers, rows }\n}\n","import ExcelJS from 'exceljs'\nimport { countWords } from './wordCount'\nimport { getLangName } from '../pages/Home'\nimport { getRows } from './getRows'\nimport { Results } from '../types/Results'\nimport JSZip from 'jszip'\n\n// debug\nimport { Config } from './config'\n;(window as any).countWords = countWords\n\nconst flattenUnzip = async (files: FileList | File[]) => {\n\tconst all = await Promise.all(\n\t\t[...files].map(async (file) => {\n\t\t\tif (file.type === 'application/x-zip-compressed') {\n\t\t\t\tconst zip = await JSZip.loadAsync(file)\n\n\t\t\t\tconst files: File[] = []\n\n\t\t\t\tfor (const zobj of Object.values(zip.files)) {\n\t\t\t\t\tif (zobj.dir) continue\n\n\t\t\t\t\tconst zblob = await zobj.async('blob')\n\n\t\t\t\t\tconst zfile = new File([zblob], zobj.name, {\n\t\t\t\t\t\tlastModified: zobj.date.getTime(),\n\t\t\t\t\t\ttype: 'xxx/xxx', // TODO\n\t\t\t\t\t})\n\n\t\t\t\t\tfiles.push(zfile)\n\t\t\t\t}\n\n\t\t\t\treturn files\n\t\t\t}\n\n\t\t\treturn file\n\t\t}),\n\t)\n\n\treturn all.flat()\n}\n\nexport async function parseExcelFiles(\n\tfiles: FileList | File[],\n\tconfig: Config,\n): Promise<Results | null> {\n\tif (!files.length) return null\n\n\tconst results: Results = {\n\t\tcountPerUser: {},\n\t\trowsCountedPerFile: {},\n\t\tlanguages: {},\n\t}\n\n\tfiles = await flattenUnzip(files)\n\n\tawait Promise.all(\n\t\t[...files].map(\n\t\t\t(file) =>\n\t\t\t\tnew Promise<void>((res) => {\n\t\t\t\t\tconst langCode = getLangName(file.name)\n\n\t\t\t\t\tresults.rowsCountedPerFile[file.name] = 0\n\n\t\t\t\t\tif (!langCode) {\n\t\t\t\t\t\treturn res()\n\t\t\t\t\t}\n\n\t\t\t\t\tconst reader = new FileReader()\n\n\t\t\t\t\treader.onloadend = () => {\n\t\t\t\t\t\tconst arrayBuffer = reader.result as ArrayBuffer\n\n\t\t\t\t\t\tconst workbook = new ExcelJS.Workbook()\n\n\t\t\t\t\t\tworkbook.xlsx.load(arrayBuffer).then((workbook) => {\n\t\t\t\t\t\t\tworkbook.worksheets.forEach((sheet) => {\n\t\t\t\t\t\t\t\tconst { headers, rows } = getRows(sheet)\n\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\theaders &&\n\t\t\t\t\t\t\t\t\t[config.userCol, config.srcCol].every((x) =>\n\t\t\t\t\t\t\t\t\t\theaders.includes(x),\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tfor (const row of rows) {\n\t\t\t\t\t\t\t\t\t\t// if (!row[langCode]) {\n\t\t\t\t\t\t\t\t\t\t// \tcontinue\n\t\t\t\t\t\t\t\t\t\t// }\n\n\t\t\t\t\t\t\t\t\t\tconst wordCount = countWords(\n\t\t\t\t\t\t\t\t\t\t\trow[config.srcCol],\n\t\t\t\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t\t\t\tif (!wordCount) {\n\t\t\t\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tresults.countPerUser[\n\t\t\t\t\t\t\t\t\t\t\trow[config.userCol]\n\t\t\t\t\t\t\t\t\t\t] = {\n\t\t\t\t\t\t\t\t\t\t\t...results.countPerUser[\n\t\t\t\t\t\t\t\t\t\t\t\trow[config.userCol]\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t[langCode]:\n\t\t\t\t\t\t\t\t\t\t\t\t(results.countPerUser[\n\t\t\t\t\t\t\t\t\t\t\t\t\trow[config.userCol]\n\t\t\t\t\t\t\t\t\t\t\t\t]?.[langCode] ?? 0) + wordCount,\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tresults.languages[langCode] = true\n\n\t\t\t\t\t\t\t\t\t\tresults.rowsCountedPerFile[\n\t\t\t\t\t\t\t\t\t\t\tfile.name\n\t\t\t\t\t\t\t\t\t\t] += 1\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\treturn res()\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\treader.readAsArrayBuffer(file)\n\t\t\t\t}),\n\t\t),\n\t)\n\n\treturn results\n}\n","import ExcelJS from 'exceljs'\nimport { Results } from '../types/Results'\n\nconst resultsToWorkbook = (results: Results) => {\n\tconst { countPerUser, rowsCountedPerFile } = results\n\tconst languages = Object.keys(results.languages)\n\n\tconst workbook = new ExcelJS.Workbook()\n\n\t// word counts\n\t{\n\t\tconst sheet = workbook.addWorksheet('Wordcounts', {\n\t\t\tviews: [{ state: 'frozen', xSplit: 0, ySplit: 2 }],\n\t\t})\n\n\t\tconst cols = languages.length + 1\n\n\t\tsheet.autoFilter = {\n\t\t\tfrom: {\n\t\t\t\trow: 2,\n\t\t\t\tcolumn: 1,\n\t\t\t},\n\t\t\tto: {\n\t\t\t\trow: 2,\n\t\t\t\tcolumn: cols,\n\t\t\t},\n\t\t}\n\n\t\tsheet.getRow(1).values = ['User', 'Languages']\n\t\tsheet.getRow(2).values = ['', ...languages]\n\n\t\tfor (const row of [1, 2]) {\n\t\t\tsheet.getRow(row).font = { bold: true }\n\t\t}\n\n\t\tsheet.mergeCells('A1:A2')\n\t\tsheet.mergeCells(1, 2, 1, cols)\n\n\t\tsheet.getCell('B1').alignment = { horizontal: 'right' }\n\n\t\tsheet.getColumn('A').width = 30\n\n\t\tfor (const [i, [user, langData]] of Object.entries(\n\t\t\tcountPerUser,\n\t\t).entries()) {\n\t\t\tsheet.getRow(3 + i).values = [\n\t\t\t\tuser,\n\t\t\t\t...languages.map((l) => langData[l]),\n\t\t\t]\n\t\t}\n\t}\n\n\t// stats\n\t{\n\t\tconst sheet = workbook.addWorksheet('Stats', {\n\t\t\tviews: [{ state: 'frozen', xSplit: 0, ySplit: 1 }],\n\t\t})\n\n\t\tsheet.getRow(1).values = ['File', 'Rows counted']\n\t\tsheet.getRow(1).font = { bold: true }\n\n\t\tsheet.getColumn('A').width = 65\n\n\t\tfor (const [i, [file, rowsCounted]] of Object.entries(\n\t\t\trowsCountedPerFile,\n\t\t).entries()) {\n\t\t\tsheet.getRow(2 + i).values = [file, rowsCounted]\n\t\t}\n\t}\n\n\treturn workbook\n}\n\nexport async function writeExcelOutputFile(results: Results) {\n\tconst workbook = resultsToWorkbook(results)\n\n\tconst buf = await workbook.xlsx.writeBuffer({})\n\n\tconst a = document.createElement('a')\n\tconst outFile = new Blob([buf], {\n\t\ttype: 'image/jpeg',\n\t})\n\n\ta.href = URL.createObjectURL(outFile)\n\ta.download = `wordcounts_${new Date()\n\t\t.toISOString()\n\t\t.replace(/\\D/g, '')}.xlsx`\n\n\ta.click()\n}\n","import { useCallback } from 'react'\nimport { writeExcelOutputFile } from '../core/writeExcelOutputFile'\nimport { Results } from '../types/Results'\n\nexport function ResultsDisplay({ results }: { results: Results }) {\n\tconst { countPerUser, rowsCountedPerFile } = results\n\n\tconst languages = Object.keys(results.languages)\n\n\tconst exportToFile = useCallback(() => {\n\t\twriteExcelOutputFile(results)\n\t}, [results])\n\n\treturn (\n\t\t<div>\n\t\t\t<br />\n\t\t\t<button className='button primary' onClick={exportToFile}>\n\t\t\t\tExport\n\t\t\t</button>\n\n\t\t\t<h2>Rows counted per file</h2>\n\n\t\t\t<div className='table-scroller table-scroller-y'>\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>File</th>\n\t\t\t\t\t\t\t<th align='right'>Rows counted</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{Object.entries(rowsCountedPerFile).map(\n\t\t\t\t\t\t\t([file, num], i) => (\n\t\t\t\t\t\t\t\t<tr key={i}>\n\t\t\t\t\t\t\t\t\t<td>{file}</td>\n\t\t\t\t\t\t\t\t\t<td align='right'>{num}</td>\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t)}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\n\t\t\t<hr />\n\n\t\t\t<h2>Word count per user</h2>\n\n\t\t\t<div /* className='table-scroller table-scroller-x' */>\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th rowSpan={2}>User</th>\n\t\t\t\t\t\t\t<th colSpan={languages.length} align='right'>\n\t\t\t\t\t\t\t\tLanguages\n\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t{languages.map((l, i) => (\n\t\t\t\t\t\t\t\t<th key={i} align='right'>\n\t\t\t\t\t\t\t\t\t{l}\n\t\t\t\t\t\t\t\t</th>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{Object.entries(countPerUser).map(\n\t\t\t\t\t\t\t([user, langData], i) => (\n\t\t\t\t\t\t\t\t<tr key={i}>\n\t\t\t\t\t\t\t\t\t<td>{user}</td>\n\t\t\t\t\t\t\t\t\t{languages.map((l, j) => (\n\t\t\t\t\t\t\t\t\t\t<td key={j} align='right'>\n\t\t\t\t\t\t\t\t\t\t\t{langData[l]}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t)}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n","const init = {\n\tfileNameFormat: String.raw`Need_Translate_To_{{lang}}_for-`,\n\n\tsrcCol: 'eng',\n\tuserCol: 'user_name',\n}\n\nexport type Config = typeof init\n\nconst stored: Config = {\n\t...init,\n\t...JSON.parse(localStorage.getItem('form') ?? '{}'),\n}\n\n// TODO\nexport const config = stored\n","import { useEffect, useMemo, useState } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { parseExcelFiles } from '../core/parseExcelFiles'\nimport { ResultsDisplay } from '../components/ResultsDisplay'\nimport { Results } from '../types/Results'\nimport { config } from '../core/config'\n\nexport const getLangName = (fileName: string) => {\n\tconst [before, after] = config.fileNameFormat.split(/\\{\\{\\s*lang\\s*\\}\\}/)\n\n\tconst beforeIdx = fileName.indexOf(before)\n\tconst beforeEnd = beforeIdx + before.length\n\tconst afterIdx = fileName.indexOf(after, beforeEnd)\n\n\treturn [beforeIdx, afterIdx].includes(-1)\n\t\t? null\n\t\t: fileName.slice(beforeEnd, afterIdx)\n}\n\nexport const Home = () => {\n\tconst { register, watch, handleSubmit } = useForm()\n\n\tconst changeHandler = (data: any) => {\n\t\tlocalStorage.setItem('form', JSON.stringify(data))\n\t}\n\n\tconst files: FileList = useMemo(\n\t\t() => watch('file') ?? ([] as any as FileList),\n\t\t[watch],\n\t)\n\n\tconst [results, setResults] = useState<Results | null>(null)\n\n\tuseEffect(() => {\n\t\tparseExcelFiles(files, config).then(setResults)\n\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\n\t}, [files])\n\n\treturn (\n\t\t<>\n\t\t\t<form onChange={handleSubmit(changeHandler)}>\n\t\t\t\t<label>\n\t\t\t\t\tUpload files (XLSX or ZIP)\n\t\t\t\t\t<input type='file' name='file' multiple ref={register} />\n\t\t\t\t</label>\n\t\t\t</form>\n\t\t\t{results ? (\n\t\t\t\t<div>\n\t\t\t\t\t<ResultsDisplay {...{ results }} />\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</>\n\t)\n}\n","export default __webpack_public_path__ + \"static/media/instructions.5795dcfb.md\";","export function pipe<A>(a: A): A\nexport function pipe<A, B>(a: A, ab: (a: A) => B): B\nexport function pipe<A, B, C>(a: A, ab: (a: A) => B, bc: (b: B) => C): C\nexport function pipe<A, B, C, D>(\n\ta: A,\n\tab: (a: A) => B,\n\tbc: (b: B) => C,\n\tcd: (c: C) => D,\n): D\nexport function pipe<A, B, C, D, E>(\n\ta: A,\n\tab: (a: A) => B,\n\tbc: (b: B) => C,\n\tcd: (c: C) => D,\n\tde: (d: D) => E,\n): E\nexport function pipe<A, B, C, D, E, F>(\n\ta: A,\n\tab: (a: A) => B,\n\tbc: (b: B) => C,\n\tcd: (c: C) => D,\n\tde: (d: D) => E,\n\tef: (e: E) => F,\n): F\nexport function pipe(init: any, ...fns: any[]) {\n\treturn fns.reduce((val, fn) => fn(val), init)\n}\n\nexport function pipeNullable<A>(a: A): A\nexport function pipeNullable<A, B>(\n\ta: A,\n\tab: (a: NonNullable<A>) => B,\n): NonNullable<B>\nexport function pipeNullable<A, B, C>(\n\ta: A,\n\tab: (a: NonNullable<A>) => B,\n\tbc: (b: NonNullable<B>) => C,\n): NonNullable<C>\nexport function pipeNullable<A, B, C, D>(\n\ta: A,\n\tab: (a: NonNullable<A>) => B,\n\tbc: (b: NonNullable<B>) => C,\n\tcd: (c: NonNullable<C>) => D,\n): NonNullable<D>\nexport function pipeNullable<A, B, C, D, E>(\n\ta: A,\n\tab: (a: NonNullable<A>) => B,\n\tbc: (b: NonNullable<B>) => C,\n\tcd: (c: NonNullable<C>) => D,\n\tde: (d: NonNullable<D>) => E,\n): NonNullable<E>\nexport function pipeNullable<A, B, C, D, E, F>(\n\ta: A,\n\tab: (a: NonNullable<A>) => B,\n\tbc: (b: NonNullable<B>) => C,\n\tcd: (c: NonNullable<C>) => D,\n\tde: (d: NonNullable<D>) => E,\n\tef: (e: NonNullable<E>) => F,\n): NonNullable<F>\nexport function pipeNullable(init: any, ...fns: any[]) {\n\treturn fns.reduce((val, fn) => (val == null ? val : fn(val)), init)\n}\n\nexport const permute =\n\t<T>(arr: T[]) =>\n\t(arrOfArrs: T[][]) =>\n\t\tarr.flatMap((x) => arrOfArrs.map((a) => [...a, x]))\n","import { useHistory } from 'react-router-dom'\nimport { pipe } from './fns'\nimport { slugify } from './formatters'\nimport { hashWithDefault } from './utils'\n\nexport const renderAnchors = (el: HTMLElement) => {\n\tconst slugs = hashWithDefault(0)\n\n\tfor (const heading of el.querySelectorAll(\n\t\t'h2, h3, h4, h5, h6, .anchored',\n\t)) {\n\t\tif (heading.textContent) {\n\t\t\tconst slug = slugify(heading.textContent) || 'heading'\n\n\t\t\tconst x = ++slugs[slug]\n\n\t\t\theading.id = [slug, x > 1 && x].filter(Boolean).join('-')\n\t\t\theading.classList.add('anchored')\n\t\t}\n\t}\n}\n\nexport const prependPublicUrlToRelativeLinks = (el: HTMLElement) => {\n\tfor (const link of el.querySelectorAll('a')) {\n\t\tconst href = link.getAttribute('href')\n\n\t\tif (href?.startsWith('/')) {\n\t\t\tlink.setAttribute('href', process.env.PUBLIC_URL + href)\n\t\t}\n\t}\n}\n\nexport const handleLinks = (\n\tel: HTMLElement,\n\thistory: ReturnType<typeof useHistory>,\n) => {\n\tel.addEventListener('click', (e) => {\n\t\tconst target = e.target as HTMLAnchorElement\n\t\tconst href = target.getAttribute('href')\n\n\t\tif (target.nodeName === 'A' && href) {\n\t\t\te.preventDefault()\n\n\t\t\tif (\n\t\t\t\thref.startsWith('http') &&\n\t\t\t\t!href.startsWith(window.location.origin)\n\t\t\t) {\n\t\t\t\twindow.open(href, '_blank', 'noopener noreferrer')\n\t\t\t} else {\n\t\t\t\thistory.push(href.slice(process.env.PUBLIC_URL.length))\n\t\t\t}\n\t\t} else if (target.classList.contains('anchored')) {\n\t\t\twindow.location.hash = target.id\n\t\t\ttarget.scrollIntoView(true)\n\t\t}\n\t})\n}\n\nexport const scrollHashIntoView = (el: HTMLElement) => {\n\tif (window.location.hash) {\n\t\tsetTimeout(() => {\n\t\t\tconst matchedEl = pipe(\n\t\t\t\twindow.location.hash.slice(1),\n\t\t\t\tdecodeURIComponent,\n\t\t\t\tCSS.escape,\n\t\t\t\t(id) => el.querySelector(`#${id}`),\n\t\t\t)\n\n\t\t\tmatchedEl?.scrollIntoView(true)\n\t\t\t// 100ms to counteract browser position retaining\n\t\t}, 100)\n\t}\n}\n","export const hashWithDefault = <T>(defaultVal: T) =>\n\tnew Proxy(Object.create(null) as Record<string, T>, {\n\t\tget(target, key: string) {\n\t\t\treturn key in target ? target[key] : defaultVal\n\t\t},\n\t})\n","import { regex } from 'fancy-regex'\n\nexport const slugify = (str: string) =>\n\tstr\n\t\t.toLowerCase()\n\t\t.replace(\n\t\t\tregex('gu')`[\n\t\t\t\t^\n\t\t\t\t\\p{Letter}\n\t\t\t\t\\p{Mark}\n\t\t\t\t\\p{Number}\n\t\t\t]+`,\n\t\t\t' ',\n\t\t)\n\t\t.trim()\n\t\t.replace(/\\s+/g, '-')\n\nexport const filenameify = (date: Date) =>\n\tdate.toISOString().replace(/:/g, '_').slice(0, 19) + 'Z'\n","import { FC, useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport instructionsMdUrl from '../content/instructions.md'\nimport {\n\thandleLinks,\n\tprependPublicUrlToRelativeLinks,\n\trenderAnchors,\n\tscrollHashIntoView,\n} from '../utils/dom'\nimport { onHtmlRender } from '../utils/react'\nimport { snarkdown } from '../utils/snarkdown'\n\nexport const Instructions: FC = () => {\n\tconst [html, setHtml] = useState('')\n\n\tconst history = useHistory()\n\n\tuseEffect(() => {\n\t\tfetch(instructionsMdUrl, { cache: 'force-cache' }).then(async (res) => {\n\t\t\tconst content = await res.text()\n\n\t\t\tconst html = snarkdown(content)\n\n\t\t\tsetHtml(html)\n\t\t})\n\t}, [])\n\n\treturn (\n\t\t<div\n\t\t\tref={onHtmlRender((el) => {\n\t\t\t\t// setup\n\t\t\t\trenderAnchors(el)\n\t\t\t\tprependPublicUrlToRelativeLinks(el)\n\t\t\t\thandleLinks(el, history)\n\n\t\t\t\t// effects\n\t\t\t\tscrollHashIntoView(el)\n\t\t\t})}\n\t\t\tdangerouslySetInnerHTML={{ __html: html }}\n\t\t/>\n\t)\n}\n","export const onHtmlRender =\n\t(callback: (parentEl: HTMLElement) => void) =>\n\t(parentEl: HTMLElement | null) => {\n\t\tif (!parentEl) return\n\n\t\tconst observer = new MutationObserver((m) => {\n\t\t\tcallback(parentEl)\n\n\t\t\tobserver.disconnect()\n\t\t})\n\n\t\tobserver.observe(parentEl, { childList: true })\n\t}\n","import { default as _snarkdown } from 'snarkdown'\n\nexport const snarkdown = (md: string) => {\n\tconst html = md\n\t\t.split(/((?<=^|\\n)```\\r?\\n[\\s\\S]*?\\r?\\n```)/)\n\t\t.map((m, i) =>\n\t\t\ti % 2\n\t\t\t\t? `<pre><code>${m\n\t\t\t\t\t\t.split(/\\r?\\n/)\n\t\t\t\t\t\t.slice(1, -1)\n\t\t\t\t\t\t.join('\\n')}</pre></code>`\n\t\t\t\t: m\n\t\t\t\t\t\t.split(/(?:\\r?\\n){2,}/)\n\t\t\t\t\t\t.map((l) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t[' ', '\\t', '#', '-', '*', '`', '~'].some(\n\t\t\t\t\t\t\t\t\t(ch) => l.startsWith(ch),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn /^\\s*-{3,}\\s*$/.test(l)\n\t\t\t\t\t\t\t\t\t? `<hr>`\n\t\t\t\t\t\t\t\t\t: _snarkdown(l)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn `<p>${_snarkdown(l)}</p>`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join(''),\n\t\t)\n\t\t.join('')\n\t\t.replace(/<p><\\/p>/g, '')\n\n\treturn html\n}\n","import { FC } from 'react'\nimport { Switch, Route } from 'react-router-dom'\nimport { Home } from './pages/Home'\nimport { Instructions } from './pages/Instructions'\n\nexport const Routes: FC = () => {\n\treturn (\n\t\t<Switch>\n\t\t\t<Route exact path='/'>\n\t\t\t\t<Home />\n\t\t\t</Route>\n\t\t\t<Route path='/instructions'>\n\t\t\t\t<Instructions />\n\t\t\t</Route>\n\t\t</Switch>\n\t)\n}\n","import { FC } from 'react'\nimport { BrowserRouter as Router, NavLink } from 'react-router-dom'\nimport { Footer } from './components/Footer'\nimport { Routes } from './Routes'\n\nexport const App: FC = () => {\n\treturn (\n\t\t<>\n\t\t\t<Router basename={process.env.PUBLIC_URL}>\n\t\t\t\t<div className='full-page'>\n\t\t\t\t\t<nav className='tabs'>\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\tclassName='site-title'\n\t\t\t\t\t\t\talt='Clearly Local'\n\t\t\t\t\t\t\tsrc={process.env.PUBLIC_URL + '/cl-logo-small.png'}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<NavLink exact activeClassName='active' to='/'>\n\t\t\t\t\t\t\tWord Counter\n\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t<NavLink activeClassName='active' to='/instructions'>\n\t\t\t\t\t\t\tInstructions\n\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t</nav>\n\t\t\t\t\t<main className='container'>\n\t\t\t\t\t\t<Routes />\n\t\t\t\t\t</main>\n\t\t\t\t\t<Footer className='container' />\n\t\t\t\t</div>\n\t\t\t</Router>\n\t\t</>\n\t)\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport 'chota/dist/chota.css' // can't use .min.css due to CRA transpiling bug\nimport './styles/index.css'\nimport { App } from './App'\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n)\n"],"sourceRoot":""}